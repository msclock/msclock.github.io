<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-center-circle.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous" defer></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"msclock.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.24.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"github-dark"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"livere","storage":true,"lazyload":false,"nav":null,"activeClass":"livere"},"stickytabs":true,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/config.min.js" defer></script>

    <meta name="description" content="That life is reality.">
<meta property="og:type" content="website">
<meta property="og:title" content="Live in the present">
<meta property="og:url" content="https://msclock.github.io/page/5/index.html">
<meta property="og:site_name" content="Live in the present">
<meta property="og:description" content="That life is reality.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Msclock">
<meta property="article:tag" content="cpp,hexo,blog">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://msclock.github.io/page/5/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Live in the present - Msclock's Notes</title>
  








  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@7.2.0/dist/browser/pangu.umd.js" integrity="sha256-JnmRRnJK7DC6RQJbAJb6AXOM9OmWzS6z8eYultk/48Y=" crossorigin="anonymous" defer></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/utils.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/motion.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/sidebar.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/next-boot.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/pjax.min.js" defer></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.5.0/dist/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/third-party/search/local-search.min.js" defer></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/third-party/tags/pdf.min.js" defer></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"neutral"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@11.9.0/dist/mermaid.min.js","integrity":"sha256-Cz7UN0EXNjgV2u/a38wg/3BNfdRRO1XtgDq93L2GqJg="}}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/third-party/tags/mermaid.min.js" defer></script>



  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/third-party/pace.min.js" defer></script>


  




  <script src="https://cdn.jsdelivr.net/npm/quicklink@3.0.1/dist/quicklink.umd.js" integrity="sha256-44BednzIpUeQJcY8qtLyarFu0UCCTbgmWOvaoehiFQQ=" crossorigin="anonymous" defer></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://msclock.github.io/page/5/"}</script>
  <script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/third-party/quicklink.min.js" defer></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Live in the present</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Msclock's Notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">32</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">2</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">50</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Msclock"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Msclock</p>
  <div class="site-description" itemprop="description">That life is reality.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/msclock" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;msclock" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:msclock@qq.com" title="E-Mail → mailto:msclock@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://plus.google.com/msclockg" title="Google → https:&#x2F;&#x2F;plus.google.com&#x2F;msclockg" rel="noopener me" target="_blank"><i class="fab fa-google fa-fw"></i>Google</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/4140928383/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/4140928383/" class="post-title-link" itemprop="url">四大坑</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-05 14:47:32" itemprop="dateCreated datePublished" datetime="2021-12-05T14:47:32+08:00">2021-12-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/secret/" itemprop="url" rel="index"><span itemprop="name">secret</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>551</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          有东西被加密了, 请输入密码查看.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/4140928383/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/459958868/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/459958868/" class="post-title-link" itemprop="url">态度</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-09-06 13:37:35" itemprop="dateCreated datePublished" datetime="2021-09-06T13:37:35+08:00">2021-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/secret/" itemprop="url" rel="index"><span itemprop="name">secret</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>92</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          有东西被加密了, 请输入密码查看.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/459958868/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/afa93b42/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/afa93b42/" class="post-title-link" itemprop="url">python</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-09-06 10:13:26" itemprop="dateCreated datePublished" datetime="2021-09-06T10:13:26+08:00">2021-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>60k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>54 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="资源">资源</h2>
<table>
<thead>
<tr>
<th>资源</th>
<th>组织</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="https://learn.scientific-python.org/development/">scientific python development</a></td>
<td>python</td>
<td>文档</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://peps.python.org/pep-0000/">Python Enhancement Proposals Index</a></td>
<td>python</td>
<td>文档</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/python-programming-language/">geeksforgeeks</a></td>
<td>python</td>
<td>docs</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://kelepython.readthedocs.io/zh/latest/index.html">可乐 python</a></td>
<td>docs</td>
<td>文档</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://pythonguidecn.readthedocs.io/zh/latest/">pythonguide</a></td>
<td>pythonguide</td>
<td>docs</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://superfastpython.com/">superfastpython</a></td>
<td>superfastpython</td>
<td>blog</td>
</tr>
</tbody>
</table>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/afa93b42/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/2985153235/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/2985153235/" class="post-title-link" itemprop="url">ssh 实践</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-08-16 20:33:31" itemprop="dateCreated datePublished" datetime="2021-08-16T20:33:31+08:00">2021-08-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>782</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="ssh">ssh</h2>
<h3 id="安装">安装</h3>
<p>ssh 服务需要安装 ssh 服务端</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install openssh-server</span><br></pre></td></tr></tbody></table></figure>
<p>查看当前 ssh 开启情况</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -e | grep ssh</span><br></pre></td></tr></tbody></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/2985153235/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/7d9a968e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/7d9a968e/" class="post-title-link" itemprop="url">Docker 疑难问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-01-03 15:25:06" itemprop="dateCreated datePublished" datetime="2020-01-03T15:25:06+08:00">2020-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>21k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>19 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="docker">docker</h2>
<h3 id="安装">安装</h3>
<p>开发测试环境</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置docker</span></span><br><span class="line"><span class="built_in">cat</span> &gt;/etc/docker/daemon.json&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">{</span></span><br><span class="line"><span class="string">  "default-runtime": "nvidia",</span></span><br><span class="line"><span class="string">  "exec-opts": [</span></span><br><span class="line"><span class="string">    "native.cgroupdriver=systemd"</span></span><br><span class="line"><span class="string">  ],</span></span><br><span class="line"><span class="string">  "runtimes": {</span></span><br><span class="line"><span class="string">    "nvidia": {</span></span><br><span class="line"><span class="string">      "args": [],</span></span><br><span class="line"><span class="string">      "path": "nvidia-container-runtime"</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  "builder": {</span></span><br><span class="line"><span class="string">    "gc": {</span></span><br><span class="line"><span class="string">      "defaultKeepStorage": "20GB",</span></span><br><span class="line"><span class="string">      "enabled": true</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  "experimental": true,</span></span><br><span class="line"><span class="string">  "features": {</span></span><br><span class="line"><span class="string">    "buildkit": true</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  "insecure-registries": [</span></span><br><span class="line"><span class="string">    "harbor.baijiayun.com",</span></span><br><span class="line"><span class="string">    "docker.huaguisystems.com"</span></span><br><span class="line"><span class="string">  ],</span></span><br><span class="line"><span class="string">  "registry-mirrors": [</span></span><br><span class="line"><span class="string">    "https://docker.mirrors.sjtug.sjtu.edu.cn",</span></span><br><span class="line"><span class="string">    "https://reg-mirror.qiniu.com"</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></tbody></table></figure>
<p>links:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a></p>
</li>
</ul>
<h4 id="更新">更新</h4>
<p>查看系统版本, 根据官方 <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">文档</a> 更新</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/os-release</span><br></pre></td></tr></tbody></table></figure>
<p>QA: <strong>Error response from daemon: Unknown runtime specified docker-runc</strong><br>
当从不兼容的版本升级 docker 并且升级后无法启动 docker 容器时会出现这种情况，执行一下<a target="_blank" rel="noopener" href="https://foxutech.com/how-to-upgrade-docker/#:~:text=Instructions%20to%20upgrade%20YUM-based%20systems.%20Add%20the%20Docker,other%20version%2C%20you%20can%20modify%20based%20on%20that.">命令</a>，然后重启 docker。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -rl <span class="string">'docker-runc'</span> /var/lib/docker/containers/ | xargs sed -i <span class="string">'s/docker-runc/runc/g'</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="dockerd">dockerd</h3>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep dockerd</span><br><span class="line">root        6515       1  1 15:28 ?        00:01:08 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br></pre></td></tr></tbody></table></figure>
<p><code>/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</code> 是 Docker daemon 的启动命令，其中：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>/usr/bin/dockerd 是 Docker daemon 的路径。</p>
</li>
<li class="lvl-2">
<p>-H fd:// 是 Docker daemon 的监听地址，fd:// 是一个特殊的 Unix socket，用于 systemd socket activation。</p>
</li>
<li class="lvl-2">
<p>–containerd=/run/containerd/containerd.sock 是指定 Docker daemon 使用的 containerd 的 socket 文件路径。</p>
</li>
</ul>
<p>Docker daemon 使用 containerd 作为其默认的容器运行时，主要是因为 containerd 是一个轻量级的、高性能的开源容器运行时，它可以管理完整的容器生命周期，包括镜像管理、容器执行、任务管理、网络管理等。</p>
<p>除了 containerd，Docker 还支持其他的容器运行时，例如 runc、gVisor、Kata Containers 等。可以通过修改 Docker daemon 的配置文件来更改默认的容器运行时。</p>
<h3 id="cgroup-driver">cgroup driver</h3>
<p>Docker 的 cgroup driver 主要有两种类型：systemd 和 cgroupfs。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>systemd: 当 Docker 使用 systemd 作为其 cgroup driver 时，它将会使用 systemd 来创建和管理 cgroup。这意味着 Docker 将会与系统的其他部分（也使用 systemd 的部分）共享同一套 cgroup，从而实现更好的资源管理。</p>
</li>
<li class="lvl-2">
<p>cgroupfs: 当 Docker 使用 cgroupfs 作为其 cgroup driver 时，它将会直接与 cgroup 文件系统交互来创建和管理 cgroup。这意味着 Docker 将会有自己独立的一套 cgroup，与系统的其他部分（使用 systemd 的部分）分开。</p>
</li>
</ul>
<p>总的来说，systemd 和 cgroupfs 的主要区别在于它们与系统的其他部分的交互方式不同。systemd 更倾向于与系统的其他部分共享资源，而 cgroupfs 则更倾向于独立管理资源。</p>
<p>要将 Docker 的 cgroup driver 从 cgroupfs 迁移到 systemd，需要在 Docker 的配置文件中进行更改。以下是步骤：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>打开 Docker 的配置文件，通常位于 /etc/docker/daemon.json。如果文件不存在，需要创建它。</p>
</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/docker/daemon.json</span><br></pre></td></tr></tbody></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>在配置文件中添加或修改 "exec-opts"，将其设置为 "native.cgroupdriver = systemd"。</p>
</li>
</ul>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"exec-opts"</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">"native.cgroupdriver=systemd"</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>保存并关闭文件，然后重启 Docker 服务。</p>
</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></tbody></table></figure>
<p>迁移到 systemd 的好处主要有：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>更好的资源管理：systemd 可以与系统的其他部分共享 cgroup，从而实现更好的资源管理。</p>
</li>
<li class="lvl-2">
<p>更好的兼容性：一些 Kubernetes 工具（如 kubeadm）要求 Docker 使用 systemd 作为其 cgroup driver，以确保与 Kubernetes 的兼容性。</p>
</li>
<li class="lvl-2">
<p>更好的稳定性：systemd 作为 cgroup driver 的稳定性通常比 cgroupfs 更好。</p>
</li>
</ul>
<p>links:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/633832183">https://zhuanlan.zhihu.com/p/633832183</a></p>
</li>
</ul>
<h3 id="command">command</h3>
<h4 id="docker-daemon-service">docker daemon service</h4>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service docker start/stop/restart/status</span><br><span class="line">systemctl start/stop/restart docker</span><br></pre></td></tr></tbody></table></figure>
<h4 id="volume">volume</h4>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker volume <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 清除匿名不再引用的 volume</span></span><br><span class="line">docker volume prune</span><br><span class="line"><span class="comment"># 清除所有不再引用的 volume</span></span><br><span class="line">docker volume <span class="built_in">ls</span> -f dangling=<span class="literal">true</span> | awk <span class="string">'{print $2}'</span> | xargs docker volume <span class="built_in">rm</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="docker-QA">docker QA</h2>
<p>以下为 Docker 中各种疑难问题及解答</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/136264.htm">CMD 和 ENTRYPOINT 命令</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/124687.htm">在 Docker 容器中捕获信号</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/136264.htm">如何忽略 ENTRYPOINT 指令</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.escapelife.site/posts/43a2bb9b.html">docker 常见文件汇总</a></p>
</li>
</ul>
<h3 id="Got-permission-denied-while-trying-to-connect-to-the-Docker-daemon-socket-at-unix-var-run-docker-sock-Get-http-2Fvar-2Frun-2Fdocker-sock-v1-40-images-json-dial-unix-var-run-docker-sock-connect-permission-denied">Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.40/images/json: dial unix /var/run/docker.sock: connect: permission denied</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://linuxhandbook.com/docker-permission-denied/">https://linuxhandbook.com/docker-permission-denied/</a></p>
</li>
</ul>
<h2 id="docker-daemon-配置">docker daemon 配置</h2>
<p>docker 运行配置主要通过文件 daemon.json 配置。所在路径在 <code>/etc/docker/daemon.json</code>。</p>
<figure class="highlight jsonc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="comment">// 配置docker运行数据储存路径</span></span><br><span class="line">    <span class="attr">"data-root"</span><span class="punctuation">:</span> <span class="string">"/home/docker"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 配置docker仓库源</span></span><br><span class="line">    <span class="attr">"insecure-registries"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="comment">// 私有源</span></span><br><span class="line">      <span class="string">"harbor.xxx.com"</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 公开源</span></span><br><span class="line">    <span class="attr">"registry-mirrors"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">"https://docker.mirrors.sjtug.sjtu.edu.cn"</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>
<p>links:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/">Docker 官方文档</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.simapple.com/docker-chinese-manual">Docker 中文文档</a></p>
</li>
</ul>
<h2 id="docker-context">docker context</h2>
<p>docker context 用于本地方便地访问远程主机的 docker 服务。在不需要手动通过 ssh 连接远程服务器时比较有帮助。</p>
<h3 id="添加-context">添加 context</h3>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker context create &lt;context-name&gt; --docker <span class="string">"host=ssh://format"</span></span><br></pre></td></tr></tbody></table></figure>
<p>这里 <strong>format</strong> 可使用一下格式:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>username@host-ip[:port]</p>
</li>
<li class="lvl-2">
<p>name，指在~/.ssh/config 中提供的 ssh 连接配置名称。</p>
</li>
</ul>
<p>示例:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> ~/.ssh/config</span><br><span class="line">Host my-remote-docker-machine</span><br><span class="line">  Hostname host</span><br><span class="line">  User username</span><br><span class="line">  Port 12345</span><br><span class="line"></span><br><span class="line">$ docker context create my-remote-docker-machine --docker <span class="string">"host=ssh://my-remote-docker-machine"</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="常用命令">常用命令</h3>
<p>下面列出了常用的 docker context 命令和示例。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ docker --context my-remote-docker-machine images -q</span><br><span class="line">65dadc9c7fe7</span><br><span class="line">f814fce55133</span><br><span class="line">7a9b6da4328e</span><br><span class="line">33655f17f093</span><br><span class="line">d120da10b040</span><br><span class="line">6d6859d1a42a</span><br><span class="line">c19ae228f069</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker context use my-remote-docker-machine</span><br><span class="line">my-remote-docker-machine</span><br><span class="line">Current context is now <span class="string">"my-remote-docker-machine"</span></span><br><span class="line">$ docker context <span class="built_in">ls</span></span><br><span class="line">NAME                         DESCRIPTION                               DOCKER ENDPOINT               KUBERNETES ENDPOINT   ORCHESTRATOR</span><br><span class="line">default                      Current DOCKER_HOST based configuration   unix:///var/run/docker.sock                         swarm</span><br><span class="line">my-remote-docker-machine *                                             ssh://username@host</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker context use default <span class="comment"># back to default</span></span><br><span class="line">$ docker context <span class="built_in">rm</span> my-remote-docker-machine</span><br><span class="line">my-remote-docker-machine</span><br></pre></td></tr></tbody></table></figure>
<p>使用 docker 上下文可能有助于避免手动将 SSH 连接到远程服务器。但是，当涉及到在本地使用远程 docker 构建映像时，需要考虑将上载 / 下载多少 docker 上下文。</p>
<h3 id="reference">reference</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://clavinjune.dev/en/blogs/working-with-remote-docker-using-docker-context/">https://clavinjune.dev/en/blogs/working-with-remote-docker-using-docker-context/</a></p>
</li>
</ul>
<h2 id="docker-run-permission">docker run permission</h2>
<h3 id="–cap-add">–cap-add</h3>
<p>通常用于开发用的镜像需要设置 cli 参数给予相应的容器权限。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>–cap-add=NET_RAW: 允许容器进程使用原始套接字，直接访问网络层，一般进行网络嗅探等网络底层操作的容器进程需要。</p>
</li>
<li class="lvl-2">
<p>–cap-add=SYS_PTRACE: 允许容器进程使用 ptrace 系统调用。 ptrace 允许一个进程监视和控制另一个进程的执行，包括读取和修改其内存和寄存器状态。这个选项通常用于需要进行调试或其他进程控制操作的容器。</p>
</li>
<li class="lvl-2">
<p>–cap-add=NET_ADMIN: 允许容器进程使用网络管理功能。该选项需要对网络进行配置或管理的容器，例如配置网络接口、设置路由或进行网络诊断等操作。</p>
</li>
</ul>
<h3 id="–security-opt">–security-opt</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>–security-opt seccomp = unconfined: 允许设置容器的 seccomp 配置。seccomp 是一种 Linux 内核安全模块，它可以限制进程可以执行的系统调用。该选项禁用 seccomp 配置，从而允许容器进程执行所有系统调用，通常用于需要执行一些不受限制的系统调用的容器，但是这也会降低容器的安全性。</p>
</li>
</ul>
<h3 id="–privileged">–privileged</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>它允许容器进程拥有主机上的所有特权。这个选项通常用于需要访问主机上的特权设备或执行一些需要特权的操作的容器。使用这个选项会增加容器的安全风险，因为容器进程可以访问主机</p>
</li>
</ul>
<h3 id="–gpus">–gpus</h3>
<p>允许访问主机 gpu 资源</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>[num]: gpu 数量</p>
</li>
<li class="lvl-2">
<p>all: 所有 gpu</p>
</li>
</ul>
<blockquote>
<p>[!TIP]<br>
如果需要支持 Nvidia Cuda，则需要额外安装支持的 <a target="_blank" rel="noopener" href="https://github.com/NVIDIA/nvidia-docker">Docker Runtime</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt install -y nvidia-docker2 \</span><br><span class="line">&amp;&amp; nvidia-ctk runtime configure</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>验证 gpu 是否可用</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://catalog.ngc.nvidia.com/orgs/nvidia/teams/k8s/containers/cuda-sample</span></span><br><span class="line">docker run --<span class="built_in">rm</span> --gpus=all nvcr.io/nvidia/k8s/cuda-sample:vectoradd-cuda10.2</span><br></pre></td></tr></tbody></table></figure>
<h4 id="QA">QA</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: error running hook #0: error running hook: exit status 1, stdout: , stderr: nvidia-container-cli: requirement error: unsatisfied condition: cuda&gt;=11.7: unknown.</p>
</li>
</ul>
<p>镜像版本要求 cuda 需要大于 11.7:</p>
<ol>
<li class="lvl-3">
<p>升级驱动满足镜像要求</p>
</li>
<li class="lvl-3">
<p>采用符合要求的镜像</p>
</li>
</ol>
<h3 id="容器中执行设置错误退出">容器中执行设置错误退出</h3>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set -e 配置遇到错误即退出,并设置退出错误码255</span></span><br><span class="line">docker run --<span class="built_in">rm</span> \</span><br><span class="line">    --volume <span class="string">"<span class="variable">$PWD</span>"</span>:/src \</span><br><span class="line">        -w /src \</span><br><span class="line">        python:3.8-bullseye \</span><br><span class="line">        bash -c <span class="string">"set -e &amp;&amp; \</span></span><br><span class="line"><span class="string">            pip config set global.index-url "</span>https://pypi.tuna.tsinghua.edu.cn/simple/<span class="string">" &amp;&amp; \</span></span><br><span class="line"><span class="string">            pip config set global.trusted-host "</span>pypi.tuna.tsinghua.edu.cn<span class="string">" &amp;&amp; \</span></span><br><span class="line"><span class="string">            pip install mlflow==2.4.2 || \</span></span><br><span class="line"><span class="string">            exit 255"</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="dockerignore">dockerignore</h2>
<p>.dockerignore 主要用于在 docker 构建镜像时忽略不需要打包进去的过滤方式，类似于 .gitignore 文件。该文件位于构建上下文的根目录。</p>
<p>匹配规则如下:</p>
<table>
<thead>
<tr>
<th>pattern</th>
<th style="text-align:left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>/temp</em></td>
<td style="text-align:left">匹配根路径下一级目录下所有以 temp 开头的文件或目录</td>
</tr>
<tr>
<td><em>/</em>/temp*</td>
<td style="text-align:left">匹配根路径下两级目录下所有以 temp 开头的文件或目录</td>
</tr>
<tr>
<td>temp?</td>
<td style="text-align:left">匹配根路径下以 temp 开头，任意一个字符结尾的文件或目录</td>
</tr>
<tr>
<td>**/*.go</td>
<td style="text-align:left">匹配所有路径下以 .go 结尾的文件或目录，即递归搜索所有路径</td>
</tr>
<tr>
<td>*.md<br>!<a target="_blank" rel="noopener" href="http://README.md">README.md</a></td>
<td style="text-align:left"> 匹配根路径下所有以 .md 结尾的文件或目录，但 <a target="_blank" rel="noopener" href="http://README.md">README.md</a> 除外</td>
</tr>
</tbody>
</table>
<blockquote>
<p>[!CAUTION]<br>
如果存在冲突的行或重叠包含关系，那么以后面的匹配规则为准。</p>
</blockquote>
<h3 id="reference-2">reference</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qianghaohao/article/details/87902806">https://blog.csdn.net/qianghaohao/article/details/87902806</a></p>
</li>
</ul>
<h2 id="dockerfile">dockerfile</h2>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/oFw2cRPy1eKYEXt.png" alt="容器优化的思路和方法."></p>
<p>links:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
</li>
</ul>
<h3 id="RUN">RUN</h3>
<p>使用 EOF 避免使用冗余的换行符运行, dockerfile:1.4 声明版本, 或者直接指定版本 1</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> &lt;&lt;-<span class="string">EOF</span></span></span><br><span class="line">    set -o errexit -o nounset -o pipefail</span><br><span class="line">    cd clash-dashboard</span><br><span class="line">    npm config set registry https://registry.npmmirror.com</span><br><span class="line">    npm i -g pnpm</span><br><span class="line">    pnpm install</span><br><span class="line">    npm <span class="keyword">run</span><span class="language-bash"><span class="string"> build</span></span></span><br><span class="line">EOF</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>links:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/#here-documents">https://docs.docker.com/engine/reference/builder/#here-documents</a></p>
</li>
</ul>
<h3 id="ADD-COPY">ADD &amp; COPY</h3>
<blockquote>
<p>在编写 Dockerfile 时经常需要拷贝文件或文件夹的操作，这时就需要用到 ADD 和 COPY 指令。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>拷贝单个文件到指定目录</p>
</li>
</ul>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#拷贝当前目录下的test.jar到/usr/bin目录下</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./test.jar /usr/bin/</span></span><br></pre></td></tr></tbody></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>拷贝特定的多个文件到指定目录</p>
</li>
</ul>
<p>ADD 指令支持通配符，常用的示例如下：</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#拷贝当前目录下的bin文件夹的所有sh文件到/usr/bin目录下</span></span><br><span class="line"><span class="comment">#拷贝当前目录下的bin文件夹的所有sh文件到/usr/bin目录下</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./bin/*.sh /usr/bin/</span></span><br><span class="line"><span class="comment">#拷贝当前目录下的bin文件夹的所有带后缀的文件到/usr/bin目录下</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./bin/*.* /usr/bin/</span></span><br><span class="line"><span class="comment">#拷贝当前目录下的bin文件夹的所有不带后缀的文件到/usr/bin目录下</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./bin/* /usr/bin/</span></span><br><span class="line"><span class="comment">#拷贝当前目录下的bin文件夹的所有文件到/usr/bin目录下（/usr/bin目录原有的文件会保留）</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./bin/ /usr/bin/</span></span><br></pre></td></tr></tbody></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>拷贝文件夹到指定的目录</p>
</li>
</ul>
<p>ADD 宿主机文件夹的全路径 docker 容器下的文件夹路径 + 新文件夹名</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#拷贝当前目录下的config文件夹到/usr/bin目录下</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./config /usr/bin/config</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="SHELL">SHELL</h3>
<p>用于覆盖默认的 Shell</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> docker:latest</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> &lt;&lt;-<span class="string">EOF</span></span></span><br><span class="line">    set -x</span><br><span class="line">    apk update &amp;&amp; apk <span class="keyword">add</span><span class="language-bash"><span class="string"> --no-cache bash npm nodejs git</span></span></span><br><span class="line">    npm install -g @devcontainers/cli</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># Override default shell as bash</span></span><br><span class="line"><span class="keyword">SHELL</span><span class="language-bash"><span class="string"> ["/bin/bash", "-c"]</span></span></span><br></pre></td></tr></tbody></table></figure>
<p>links:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/#shell">https://docs.docker.com/engine/reference/builder/#shell</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/42216046/18916219">https://stackoverflow.com/a/42216046/18916219</a></p>
</li>
</ul>
<h2 id="dockerfile-优化">dockerfile 优化</h2>
<h3 id="选择基础镜像">选择基础镜像</h3>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/s51tCy2ReQLqaif.png" alt="选择官方镜像."></p>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/DNOunbjFT91SIEA.png" alt="使用具体的镜像 tag."></p>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/uWRJryql2XSie1G.png" alt="使用最小基础镜像."></p>
<h3 id="优化指令顺序">优化指令顺序</h3>
<p>把 WORKDIR/ENV 等命令放在前面，COPY/ADD 等命令放在后面 [^2]。</p>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/XzV5g3meuly1nBT.png" alt="优化 WORKDIR/ENV 和 COPY/ADD 顺序."></p>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/6SgjIkntAHVBdYi.png" alt="使用更具体的 COPY 路径."></p>
<h3 id="合并构建指令">合并构建指令</h3>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/PBw2jWYCgydkmUc.png" alt="合并多个 RUN 指令，减少层数."></p>
<h3 id="清理中间缓存">清理中间缓存</h3>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://s2.loli.net/2022/09/12/VpwshZoGbNgAaCm.png" alt="清理系统包信息缓存."></p>
<p>用户数据缓存:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>~/.cache 等用户缓存。</p>
</li>
<li class="lvl-2">
<p>安装包临时缓存。</p>
</li>
</ul>
<h3 id="开发镜像和运行时镜像分离">开发镜像和运行时镜像分离</h3>
<p>runtime 镜像仅包含基本运行环境，开发镜像包含所有的开发依赖。开发镜像尽可能以 runtime 镜像为基础构建。</p>
<h3 id="多阶段构建">多阶段构建</h3>
<p><img data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://raw.githubusercontent.com/msclock/images/main/images/20230410/103130689.png" alt="多阶段构建"></p>
<h3 id="使用-buildkit">使用 buildkit</h3>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建多平台镜像</span></span><br><span class="line">$ docker buildx build --platform \</span><br><span class="line">    linux/arm,linux/arm64,linux/amd64 \</span><br><span class="line">    -t &lt;group&gt;/hello . --push</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看镜像信息</span></span><br><span class="line">$ docker buildx imagetools inspect &lt;group&gt;/hello</span><br></pre></td></tr></tbody></table></figure>
<p>使用构建缓存 <a target="_blank" rel="noopener" href="https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/reference.md">RUN --mount</a></p>
<blockquote>
<p>[!CAUTION]<br>
buildkit 会使用 docker 构建缓存，也就是 Build Cache，需要定期清理。</p>
<p>查看缓存：docker system df</p>
<p>清理方式：echo yes | docker builder prune -a</p>
</blockquote>
<h3 id="二进制工具安装">二进制工具安装</h3>
<p>从现有镜像中安装二进制文件</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.17</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> GOLANG_LINT_VERSION=V1.<span class="number">43.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> GOV PATH=/usr/local/bin/govc</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=vmware/govc:v0.27.2 /govc /usr/local/bin</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=dtzar/helm-kubectl:3.8.0 /usr/local/bin /usr/local/bin</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=koalaman/shellcheck:stable /bin/shellcheck /usr/local/bin/shellcheck</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> -from=docker: 20.10.12-dind-rootless /usr/local/bin/docker /usr/local/bin/docker</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=hashicorp/packer:1.8 /bin/packer /usr/local/bin</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=quay.io/argoproj/argocli:v3.2.6 /bin/argo /usr/local/bin</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="reference-3">reference</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.escapelife.site/posts/36c7bd6f.html">dockerfile 优化参考</a></p>
</li>
</ul>
<h2 id="docker-inspect">docker inspect</h2>
<p>docker inspect 输出可以通过<code>--format</code>,使用<code>{{.}}</code>检索某个字段结果</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出原始数据, 这里`.`表示所有结果</span></span><br><span class="line">docker inspect --format <span class="string">'{{.}}'</span> &lt;container name&gt;</span><br><span class="line"><span class="comment"># 以json输出,并检索字段 LogPath</span></span><br><span class="line">docker inspect --format <span class="string">'{{json .LogPath}}'</span> &lt;container name&gt; | jq</span><br><span class="line"><span class="comment"># 以表格输出</span></span><br><span class="line">docker inspect --format <span class="string">'table {{.ID}}\t{{.Name}}\t{{.Node}}\t{{.CurrentState}}'</span> &lt;container name&gt;</span><br></pre></td></tr></tbody></table></figure>
<h3 id="log">log</h3>
<p>Docker 默认将日志存储到一个日志文件中。要检查日志文件路径，请运行命令</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format=<span class="string">'{{.LogPath}}'</span> containername</span><br><span class="line"></span><br><span class="line">/var/lib/docker/containers/f844a7b45ca5a9589ffaa1a5bd8dea0f4e79f0e2ff639c1d010d96afb4b53334/f844a7b45ca5a9589ffaa1a5bd8dea0f4e79f0e2ff639c1d010d96afb4b53334-json.log</span><br></pre></td></tr></tbody></table></figure>
<p>要查看实时日志，可以在以下命令中运行</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f `docker inspect --format=<span class="string">'{{.LogPath}}'</span> containername`</span><br></pre></td></tr></tbody></table></figure>
<p>注意：</p>
<p><code>/var/lib/docker/containers/f844a7b45ca5a9589ffaa1a5bd8dea0f4e79f0e2ff639c1d010d96afb4b53334/f844a7b45ca5a9589ffaa1a5bd8dea0f4e79f0e2ff639c1d010d96afb4b53334-json.log</code>仅当 docker 生成日志（如果没有日志）时，才会创建此日志文件，否则该文件将不存在。如果我们运行命令<code>docker logs containername</code>，它类似于某个时候，但什么也不返回。在这种情况下，该文件将不可用。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>重定向</p>
</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f &lt;yourContainer&gt; &amp;&gt; your.log &amp;</span><br></pre></td></tr></tbody></table></figure>
<p>说明：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>-f（即–follow）：写入所有现有日志，并继续（跟随）记录接下来出现的所有内容。</p>
</li>
<li class="lvl-2">
<p>&amp;&gt; 重定向标准输出和标准错误。</p>
</li>
<li class="lvl-2">
<p>可能想在后台运行该方法，因此 &amp;。</p>
</li>
<li class="lvl-2">
<p>可以通过以下方式将输出和 stderr 分开：（&gt; output.log 2&gt; error.log 而不是使用 &amp;&gt;）。</p>
</li>
</ul>
<h2 id="docker-port">docker port</h2>
<h3 id="porting-映射">porting 映射</h3>
<p>默认情况下，宿主机是无法访问容器内部网络的，但是可以使用端口映射来解决这个问题。主要通过 docker run 跟 -P（大写） 或 -p（小写）参数来实现。docker run -P 会把容器中监听的端口随机绑定到宿主机的可用端口上：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -p &lt;format&gt; image</span><br><span class="line"><span class="comment"># 默认是 tcp 协议，如果是 udp 协议，则可以显示指定</span></span><br><span class="line">docker run -d -p 127.0.0.1:8080:80/udp nginx:latest</span><br><span class="line"><span class="comment"># 查看容器 port 映射情况</span></span><br><span class="line">docker port container_ID <span class="comment">#容器ID</span></span><br><span class="line"><span class="comment">#将nginx的80端口映射到宿主机的800端口上</span></span><br><span class="line">docker run -d --name ng -it -p 800:80 nginx</span><br><span class="line"><span class="comment"># docker port ng</span></span><br><span class="line">80/tcp -&gt; 0.0.0.0:800</span><br></pre></td></tr></tbody></table></figure>
<p><code>&lt;format&gt;</code>指定格式如下</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>ip:hostport:containerport #指定 ip、指定宿主机 port、指定容器 port</p>
</li>
<li class="lvl-2">
<p>ip::containerport #指定 ip、未指定宿主机 port（随机）、指定容器 port</p>
</li>
<li class="lvl-2">
<p>hostport:containerport #未指定 ip、指定宿主机 port、指定容器 port</p>
</li>
</ul>
<h3 id="容器互联">容器互联</h3>
<p>容器互联通过 --link 配置链接实现单独隔离容器的互联。</p>
<p>以下以 nginx + php-fpm 示例：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里分别有一个 php-fpm 和 nginx 镜像。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、先启动php-fpm 容器， 并使用 --name 参数指定容器名</span></span><br><span class="line">[root@localhost ~] docker run -d --name php-fpm php:5.6.32-fpm</span><br><span class="line">3e4b04174da9a91f77d9560113d3021f90a9638165968ccff44fede6c7961871</span><br><span class="line"><span class="comment"># 每一个运行中的Docker容器都有一块虚拟网卡和一个内网ip，可以进到上面的容器来查看：</span></span><br><span class="line"><span class="comment"># 先安装ifconfig命令，然后使用ifconfig查看ip地址信息</span></span><br><span class="line">[root@localhost ~] docker <span class="built_in">exec</span> -it php-fpm /bin/bash</span><br><span class="line">root@3e4b04174da9:/var/www/html# apt-get update</span><br><span class="line">root@3e4b04174da9:/var/www/html# apt-get install net-tools</span><br><span class="line">root@3e4b04174da9:/var/www/html# ifconfig</span><br><span class="line"><span class="comment"># 可以看到php-fpm容器有一块 eth0 网卡， 其ip地址为 172.17.0.54，还可以查看hosts信息</span></span><br><span class="line">root@3e4b04174da9:/var/www/html# <span class="built_in">cat</span> /etc/hosts</span><br><span class="line"><span class="comment"># 容器ID解析到了该容器局域网IP</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、再启动nginx容器，同样指定一个名字，并使用 --link 连接到之前的php-fpm容器。</span></span><br><span class="line">[root@localhost ~] docker run -d -p 8080:80 --name nginx --<span class="built_in">link</span> php-fpm nginx:latest</span><br><span class="line">03fe0d3fbd43b5db157992703f70dd6eff4555c4e49c3620e7a212c81824778f</span><br><span class="line"><span class="comment"># 此时 nginx 容器就连接到 php-fpm 容器上了，可以进入nginx容器查看相关环境变量和hosts信息</span></span><br><span class="line">[root@localhost ~] docker <span class="built_in">exec</span> -it nginx /bin/bash</span><br><span class="line">root@03fe0d3fbd43:/ <span class="built_in">env</span></span><br><span class="line"><span class="comment"># 能够看到 nginx 容器中有很多 PHP_FPM 相关的环境变量，而hosts中除了有本身容器ID与自身IP地址的解析关系外，</span></span><br><span class="line"><span class="comment"># 还包含了php-fpm 容器的解析，我们可以使用 ping 或 telnet 命令查看两个容器之间的网络是否畅通。</span></span><br><span class="line"><span class="comment"># 先安装 ping 和 telnet ：</span></span><br><span class="line">root@03fe0d3fbd43:/ apt-get install iputils-ping</span><br><span class="line">root@03fe0d3fbd43:/ apt-get install telnet</span><br><span class="line">root@03fe0d3fbd43:/ ping php-fpm</span><br><span class="line"><span class="comment"># 看到连接了容器之后可以直接用容器名来访问,非常方便</span></span><br><span class="line"><span class="comment"># 现在我们可以配置 nginx 的 fastcgi， 转发php请求到 php-fpm 容器</span></span><br><span class="line"><span class="comment"># 先安装VI：</span></span><br><span class="line">root@03fe0d3fbd43:/ apt-get install vim-tiny</span><br><span class="line"><span class="comment"># 然后修改 /etc/nginx/conf.d/default.nginx</span></span><br><span class="line"><span class="comment"># 记得修改好后 reload 一下nginx</span></span><br><span class="line">root@03fe0d3fbd43:/ /etc/init.d/nginx reload</span><br><span class="line"><span class="comment"># 在php-fpm容器的 /php 目录下创建一个 test.php，并添加相应的权限</span></span><br><span class="line">[root@localhost ~] docker <span class="built_in">exec</span> -it php-fpm /bin/bash</span><br><span class="line">root@0805ea04f2c8:/var/www/html# <span class="built_in">mkdir</span> /php</span><br><span class="line">root@0805ea04f2c8:/var/www/html# <span class="built_in">echo</span> <span class="string">'&lt;?php echo time() . "\n";'</span> &gt; /php/test.php</span><br><span class="line">root@0805ea04f2c8:/var/www/html# <span class="built_in">chmod</span> 777 /php/test.php</span><br><span class="line"><span class="comment"># 然后在宿主机下访问该php文件：</span></span><br><span class="line">[root@localhost ~] curl <span class="string">'127.0.0.1:8080/test.php'</span></span><br><span class="line">1509695115</span><br><span class="line">[root@localhost ~] curl <span class="string">'127.0.0.1:8080/test.php'</span></span><br><span class="line">1509695138</span><br></pre></td></tr></tbody></table></figure>
<h3 id="参考">参考</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.h5w3.com/tag/Docker">https://www.h5w3.com/tag/Docker</a></p>
</li>
</ul>
<h2 id="dumb-init">dumb-init</h2>
<p>这里介绍了一种容器初始化系统 <a target="_blank" rel="noopener" href="https://github.com/Yelp/dumb-init"><code>dumb-init</code></a>。</p>
<p>主要关注于解决两个问题。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>作为 <code>PID</code> 为 1 容器进程的信号处理。</p>
</li>
<li class="lvl-2">
<p>孤儿僵尸进程回收。</p>
</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/7d9a968e/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/2a2a7e8a/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/2a2a7e8a/" class="post-title-link" itemprop="url">flutter</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-01-03 15:25:06" itemprop="dateCreated datePublished" datetime="2020-01-03T15:25:06+08:00">2020-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Flutter">Flutter</h2>
<p>Google 开发的基于 Dart 跨平台桌面开发框架。</p>
<h2 id="Resource">Resource</h2>
<table>
<thead>
<tr>
<th>资源</th>
<th>类型</th>
<th>组织</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.flutter.dev/">flutter</a></td>
<td>dev doc</td>
<td>flutter</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.flutter.cn/">flutter cn</a></td>
<td>dev doc</td>
<td>flutter</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://dartpad.dev/">dartpad</a></td>
<td>dev tool</td>
<td>online flutter dev environment</td>
</tr>
</tbody>
</table>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/2a2a7e8a/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/996635634/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/996635634/" class="post-title-link" itemprop="url">network</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-31 10:28:24" itemprop="dateCreated datePublished" datetime="2019-12-31T10:28:24+08:00">2019-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="resource">resource</h2>
<table>
<thead>
<tr>
<th>资源</th>
<th>组织</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/bregman-arie/devops-exercises#network">devops-exercises</a></td>
<td>bregman-arie</td>
<td>基础</td>
</tr>
</tbody>
</table>
<h2 id="ipv4">ipv4</h2>
<h3 id="格式表示">格式表示</h3>
<p>IPv4 地址是 Internet Protocol Version 4 的缩写，它是一种在互联网上使用的网络地址。IPv4 地址由四个数字组成，每个数字在 0 到 255 之间，数字之间用点（.）分隔。例如，192.168.1.1 就是一个 IPv4 地址。</p>
<p>IPv4 地址的二进制表示是将每个数字转换为 8 位二进制数。例如，192.168.1.1 的二进制表示为：<code>11000000.10101000.00000001.00000001</code></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/996635634/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/796530809/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/796530809/" class="post-title-link" itemprop="url">记忆和想象方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-31 10:23:51" itemprop="dateCreated datePublished" datetime="2019-12-31T10:23:51+08:00">2019-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/secret/" itemprop="url" rel="index"><span itemprop="name">secret</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>494</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          有东西被加密了, 请输入密码查看.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/796530809/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/caeaa4a1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/caeaa4a1/" class="post-title-link" itemprop="url">cpp 实践</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-17 08:25:02" itemprop="dateCreated datePublished" datetime="2019-12-17T08:25:02+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>123k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1:52</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="开发社区">开发社区</h2>
<p>搜集的 C++ 问答社区</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://developercommunity.visualstudio.com/cpp">Visual Studio (Microsoft)</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.reddit.com/r/cpp/">reddit</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.codingame.com/learn">coedingGame</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://bytes.com/browse/">bytes</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://medium.com/">medium</a></p>
</li>
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://dev.to/">dev.to</a></p>
</li>
</ul>
<h2 id="相关资源">相关资源</h2>
<p>C++ 比较庞杂，开源社区资源，整理如下：</p>
<table>
<thead>
<tr>
<th>资源</th>
<th>组织</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="https://isocpp.org/">ISO CPP</a></td>
<td>isocpp</td>
<td>规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://isocpp.org/">C++ Core Guidelines</a></td>
<td>isocpp</td>
<td>规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://cpp-note.readthedocs.io/zh/latest/index.html">C++ Note</a></td>
<td>TOMO-CAT</td>
<td>基本语法</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://abseil.io/tips/">C++ Tips</a></td>
<td>Abseil 及 Google</td>
<td>规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a></td>
<td>Google</td>
<td>规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.cppstories.com/p/resources/">C++ Stories</a></td>
<td>Bartłomiej Filipek</td>
<td>博客</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://fenbf.github.io/AwesomePerfCpp/">AwesomePerfCpp</a></td>
<td>fenbf</td>
<td>博客</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/jobbole/awesome-cpp-cn">awesome cpp cn</a></td>
<td>jobbole</td>
<td>框架</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/fffaraz/awesome-cpp">awesome cpp</a></td>
<td>fffaraz</td>
<td>框架</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://cppinsights.io/">C++ Insights</a></td>
<td>cppinsights</td>
<td>工具</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://godbolt.org/">C++ Compiler Explorer</a></td>
<td>godbolt</td>
<td>工具</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://cpulator.01xz.net/">Computer simulator</a></td>
<td>cpulator</td>
<td>工具</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://wandbox.org/">sandbox</a></td>
<td>melpon</td>
<td>工具</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://key.words.run/cn?aid=6370f724ea64396ce2e709e0">Reshaper 激活码</a></td>
<td> Reshaper</td>
<td>插件 / 工具</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.wholetomato.com/">Visual Assist</a></td>
<td>Visual Assist</td>
<td>插件 / 工具</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://johnnysswlab.com/">Performance Effect</a></td>
<td>johnnysswlab</td>
<td>blog</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.open-std.org/JTC1/SC22/WG21/">ISO/IEC C++</a></td>
<td>ISO/IEC</td>
<td>标准规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.open-std.org/JTC1/SC22/WG14/">ISO/IEC C</a></td>
<td>ISO/IEC</td>
<td>标准规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.open-std.org/JTC1/SC22/WG15/">ISO/IEC POSIX</a></td>
<td>ISO/IEC</td>
<td>标准规范</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/cpp-best-practices">cpp-best-practices</a></td>
<td>cpp-best-practices</td>
<td>Jason Turner</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://cppnext">cppnext</a></td>
<td>Alex Dathskovsky blog</td>
<td>博客</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://alandefreitas.github.io/moderncpp/">moderncpp</a></td>
<td>Alan De Freitas</td>
<td>博客</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/sandordargo/cpp-resources">cpp-resources</a></td>
<td>sandordargo</td>
<td>github 仓库</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://caiorss.github.io/C-Cpp-Notes/">c-cpp-notes</a></td>
<td>caiorss</td>
<td>博客</td>
</tr>
</tbody>
</table>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/caeaa4a1/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://msclock.github.io/posts/51646408/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Msclock">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Live in the present">
      <meta itemprop="description" content="That life is reality.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Live in the present">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/51646408/" class="post-title-link" itemprop="url">Welcome to Hexo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-15 10:57:12" itemprop="dateCreated datePublished" datetime="2019-12-15T10:57:12+08:00">2019-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-01 09:26:26" itemprop="dateModified" datetime="2025-09-01T09:26:26+08:00">2025-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/develop/" itemprop="url" rel="index"><span itemprop="name">develop</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using <code>Hexo</code>, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/posts/51646408/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Msclock</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">426k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">6:27</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/msclock" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.24.1/source/js/third-party/comments/livere.min.js" defer></script>


        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body>
</html>
